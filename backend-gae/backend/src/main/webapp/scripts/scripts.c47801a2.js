"use strict";angular.module("internstellarDashApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/dash/:base",{templateUrl:"views/dash.html",controller:"DashCtrl",controllerAs:"dash"}).when("/aval/:base",{templateUrl:"views/aval.html",controller:"AvalCtrl",controllerAs:"aval"}).when("/planetas/:base",{templateUrl:"views/planetas.html",controller:"PlanetasCtrl",controllerAs:"planetas"}).otherwise({redirectTo:"/"})}]),angular.module("internstellarDashApp").controller("MainCtrl",["$scope","InternstellarService",function(a,b){a.updateInterval=3e5}]),angular.module("internstellarDashApp").controller("DashCtrl",["$scope","$routeParams","$interval","InternstellarService",function(a,b,c,d){var e=b.base;a.items=[],a.updateBoard=function(b){d.getLastUpdates(b).then(function(b){console.log(b),a.items=b.items},function(a){console.log(a)})},e=e.toLowerCase(),e="campinas"==e?"Campinas":"bh"==e?"BH":"",console.log(e),a.updateBoard(e),c(function(){a.updateBoard(e)},a.updateInterval)}]),angular.module("internstellarDashApp").controller("AvalCtrl",["$scope","$routeParams","AvaliacaoService",function(a,b,c){var d=b.base;a.cidade=d,a.aval={idGrupo:"",loginSensei:"",desafio:1,notes:""},c.gatAllGrupos(d).then(function(b){a.grupos=b.items},function(a){console.log(a),bootbox.alert("Ocorreu um erro ao tentar carregar os grupos da cidade "+d+": \r\n"+a.error.message)}),a.enviar=function(a){console.log(a),bootbox.confirm({title:"Confirmar",message:"Confirma esta avaliação?",buttons:{cancel:{label:'<i class="fa fa-times"></i> Cancel'},confirm:{label:'<i class="fa fa-check"></i> Confirm'}},callback:function(b){b&&c.sendData(a).then(function(a){console.log(a);var b=a.dataFormatada;bootbox.alert("Sua avaliação foi enviada com sucesso. Data/hora: "+b)},function(a){console.log(a),bootbox.alert("Erro ao enviar os dados da avaliação: \r\n"+a.error.message)})}})}}]),angular.module("internstellarDashApp").controller("PlanetasCtrl",["$scope","$routeParams","$interval","InternstellarService",function(a,b,c,d){var e=b.base;a.planets=[],a.updatePlanets=function(b){d.getPlanetUpdates(b).then(function(b){a.planets=b.items},function(a){console.log(a)})},e=e.toLowerCase(),e="campinas"==e?"Campinas":"bh"==e?"BH":"",a.updatePlanets(e),c(function(){a.updatePlanets(e)},a.updateInterval)}]),angular.module("internstellarDashApp").service("InternstellarService",["$http","$q",function(a,b){return{getLastUpdates:function(c){var d=b.defer(),e="edb011adff20426e89536c69ef58b087";return a.get("https://internstellar-ciandt.appspot.com/_ah/api/sumarios/v1/getSumario?base="+c+"&token="+e).success(function(a){console.log(a),d.resolve(a)}).error(function(a,b){console.log(a),d.reject(a)}),d.promise},getPlanetUpdates:function(c){var d=b.defer(),e="edb011adff20426e89536c69ef58b087";return a.get("https://internstellar-ciandt.appspot.com/_ah/api/planetas/v1/get?base="+c+"&token="+e).success(function(a){d.resolve(a)}).error(function(a,b){d.reject(a)}),d.promise}}}]),angular.module("internstellarDashApp").service("AvaliacaoService",["$http","$q",function(a,b){var c="edb011adff20426e89536c69ef58b087";return{gatAllGrupos:function(c){c=c.toLowerCase(),c="campinas"==c?"Campinas":"bh"==c?"BH":"",console.log(c);var d=b.defer();return a.get("https://internstellar-ciandt.appspot.com/_ah/api/grupos/v1/get?cidade="+c).success(function(a){console.log(a),d.resolve(a)}).error(function(a,b){console.log(a),d.reject(a)}),d.promise},sendData:function(d){var e=b.defer();return a.post("https://internstellar-ciandt.appspot.com/_ah/api/avaliacoes/v1/new?token="+c,d).success(function(a){console.log(a),e.resolve(a)}).error(function(a,b){console.log(a),e.reject(a)}),e.promise}}}]),angular.module("internstellarDashApp").run(["$templateCache",function(a){a.put("views/aval.html",'<div class="col-md-6 col-lg-6 fundo-branco col-centered"> <form class="form-horizontal padding-bottom-20 padding-top-20"> <fieldset> <!-- Form Name --> <legend>Enviar avaliação - {{cidade | uppercase}}</legend> <p class="text-danger"> Sensei, antes de enviar uma avaliação, peça para seu grupo fazer uma demo e repasse com eles o que é pedido pelo desafio. </p> <p class="text-danger"> Se estiver de acordo, só então envie a avaliação. </p> <!-- Select Basic --> <div class="form-group"> <label class="col-md-4 control-label">Grupo</label> <div class="col-md-6"> <select class="form-control" ng-options="grupo.id as grupo.nome for grupo in grupos track by grupo.id" ng-model="aval.idGrupo" required> </select> </div> </div> <!-- Text input--> <div class="form-group"> <label class="col-md-4 control-label" for="textinput">Login Sensei</label> <div class="col-md-5"> <input ng-model="aval.loginSensei" type="text" placeholder="Login CI&amp;T" class="form-control input-md" required> <span class="help-block">Informe seu login completo da CI&amp;T</span> </div> </div> <!-- Multiple Radios (inline) --> <div class="form-group"> <label class="col-md-4 control-label" for="desafio">Desafio completado</label> <div class="col-md-4"> <label class="radio-inline" for="desafio-0"> <input type="radio" name="desafio" id="desafio-0" ng-model="aval.desafio" value="1" checked>1 </label> <label class="radio-inline" for="desafio-1"> <input type="radio" name="desafio" id="desafio-1" ng-model="aval.desafio" value="2">2 </label> <label class="radio-inline" for="desafio-2"> <input type="radio" name="desafio" id="desafio-2" ng-model="aval.desafio" value="3">3 </label> <label class="radio-inline" for="desafio-3"> <input type="radio" name="desafio" id="desafio-3" ng-model="aval.desafio" value="4">4 </label> <label class="radio-inline" for="desafio-4"> <input type="radio" name="desafio" id="desafio-4" ng-model="aval.desafio" value="5">5 </label> </div> </div> <!-- Textarea --> <div class="form-group"> <label class="col-md-4 control-label" for="notes">Alguma observação?</label> <div class="col-md-4"> <textarea class="form-control" id="notes" name="notes" ng-model="aval.notes"></textarea> </div> </div> <!-- Button --> <div class="form-group"> <label class="col-md-4 control-label" for="enviar"></label> <div class="col-md-4"> <button id="enviar" name="enviar" class="btn btn-success" ng-click="enviar(aval);">Enviar</button> </div> </div> </fieldset> </form> </div>'),a.put("views/dash.html",'<div class="col-md-12 margin-bottom-20"> <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp col-md-12"> <thead> <tr> <th class="text-center">Foto</th> <th class="text-center">Grupo</th> <th class="text-left">Integrantes</th> <th>Respostas</th> <th>Pontos Desafios</th> <th>Pontos</th> <th>Última Pontuação</th> </tr> </thead> <tbody> <tr ng-repeat="item in items"> <td><img src="{{item.grupo.fotoEquipe.value || item.grupo.equipe.imagem}}" class="img-responsive icon-times centered"></td> <td class="{{item.grupo.equipe.cor}} text-center">{{item.grupo.nome}} ({{item.grupo.equipe.nome + \' / \' + item.grupo.equipe.cor}})</td> <td class="text-left"> <div ng-repeat="integrante in item.grupo.integrantes">#{{integrante.numero}} - {{integrante.nome}}</div> </td> <td>{{item.countRespCorr}}</td> <td>{{item.desafConc}}</td> <td>{{item.pontos}}</td> <td>{{item.ultimaPontuacaoFormatada}}</td> </tr> </tbody> </table> </div>'),a.put("views/main.html",'<!--<div class="jumbotron">\n  <h1>\'Allo, \'Allo!</h1>\n  <p class="lead">\n    <img src="images/yeoman.png" alt="I\'m Yeoman"><br>\n    Always a pleasure scaffolding your apps.\n  </p>\n  <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p>\n</div>\n\n<div class="row marketing">\n  <h4>HTML5 Boilerplate</h4>\n  <p>\n    HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites.\n  </p>\n\n  <h4>Angular</h4>\n  <p>\n    AngularJS is a toolset for building the framework most suited to your application development.\n  </p>\n\n  <h4>Karma</h4>\n  <p>Spectacular Test Runner for JavaScript.</p>\n</div>--> <div class="row"> <div class="col-md-12 height-320"> <img id="logo" src="images/logo.png" class="animated pulse infinite center-block" alt="InternStellar Journey" title="InternStellar Journey"> </div> </div>'),a.put("views/planetas-orbit.html",'<ul class="wrapper"> <div class="sun"> <div class="star"></div> </div> <div ng-repeat="(key, planet) in planets" class="custom-planet planet-{{key}}"> <div class="planet" style="background: url({{planet.image}}) no-repeat"> <div class="shadow"></div> <div class="conq"> <div ng-repeat="conq in planet.gruposConquistadores" class="{{conq.equipe.cor}} text-center"> {{conq.nome}} ({{conq.equipe.nome + \' / \' + conq.equipe.cor}}) </div> </div> </div> </div> </ul>'),a.put("views/planetas.html",'<div class="col-md-12 margin-bottom-20"> <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp col-md-12"> <thead> <tr> <th class="text-center" colspan="2">Planeta</th> <th class="text-center">Conquistadores</th> </tr> </thead> <tbody> <tr ng-repeat="planet in planets"> <td><img src="{{planet.imagem}}" class="img-responsive centered"></td> <td class="text-center">{{planet.nome}}</td> <td> <div ng-repeat="conq in planet.gruposConquistadores" class="{{conq.equipe.cor}} text-center"> {{conq.nome}} ({{conq.equipe.nome + \' / \' + conq.equipe.cor}}) </div> </td> </tr> </tbody> </table> </div>')}]);